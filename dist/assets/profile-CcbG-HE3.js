import{b as p,d as f}from"./constants-CygYw0oH.js";import{g,r as d}from"./main-yHmyNSKw.js";async function m(n,e){const t=await g(),a={method:"PUT",headers:{"X-Noroff-API-Key":p,Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(e)},o=await fetch(`${f}/${n}`,a);if(!o.ok)throw console.error("Failed to update profile data:",o),new Error(`Error updating profile data: ${o.status}`);return await o.json()}async function c(){const n=localStorage.getItem("loggedInUsername"),e=await d(n),t=document.getElementById("user-profile-info");t&&(t.innerHTML=`
<span>Welcome, ${e.data.name}!</span>
<div class="flex gap-6">
<span>Credits: ${e.data.credits}</span>
<span>Listings: ${e.data._count?.listings||"No listings yet."}</span>
<span>Wins: ${e.data._count?.wins||"No wins yet."}</span>
</div>
<div>${e.data.bio}</div>
                `)}async function v(){const n=localStorage.getItem("loggedInUsername"),e=await d(n),t=document.getElementById("edit-profile-btn"),a=document.getElementById("update-profile-form"),o=document.getElementById("bio"),i=document.getElementById("avatar"),s=document.getElementById("banner-url");t.addEventListener("click",()=>{a.classList.add("block"),a.classList.remove("hidden"),t.classList.add("hidden"),t.classList.remove("block")}),o&&(o.value=e.data.bio||""),i&&(i.value=e.data.avatar?.url||""),s&&(s.value=e.data.banner?.url||""),a&&a.addEventListener("submit",async l=>{l.preventDefault();const u={bio:o.value,avatar:{url:i.value},banner:{url:s.value}};try{const r=await m(n,u);console.log("Profile updated successfully:",r),await c(),a.classList.add("hidden"),a.classList.remove("block"),t.classList.add("block"),t.classList.remove("hidden")}catch(r){console.error("Error updating profile:",r)}})}async function y(){document.getElementById("create-listing-btn").addEventListener("click",()=>{window.location.href="../../../../listings/create/index.html"})}async function I(){document.getElementById("edit-listing-btn").addEventListener("click",()=>{window.location.href="../../../../listings/edit/index.html"})}c();v();y();I();
