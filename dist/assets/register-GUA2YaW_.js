import{a as g}from"./constants-BDf8nfUD.js";/* empty css              */import{l as u}from"./login-c4P-18dJ.js";async function f({name:a,email:n,password:s}){try{const e=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:n,password:s})}),t=await e.json();if(console.log("API Response:",e.status,t),!e.ok)throw new Error(t.message||"Registration failed");return t}catch(e){throw new Error("Error during registration: "+e.message)}}async function h(a){a.preventDefault();const n=document.getElementById("username").value,s=document.getElementById("username-alert"),e=document.getElementById("email").value,t=document.getElementById("email-alert"),i=document.getElementById("password").value,l=document.getElementById("password-alert");let o=!0;if(/^[a-zA-Z0-9_]{3,}$/.test(n)?s.classList.add("hidden"):(s.classList.remove("hidden"),o=!1),/^[a-zA-Z0-9._%+-]+@stud\.noroff\.no$/.test(e)?t.classList.add("hidden"):(t.classList.remove("hidden"),o=!1),i.length<8?(l.classList.remove("hidden"),o=!1):l.classList.add("hidden"),!!o)try{if((await f({name:n,email:e,password:i})).data){const r=await u({email:e,password:i});if(r.data&&r.data.accessToken){const c=r.data.accessToken,m=r.data.name;localStorage.setItem("accessToken",c),localStorage.setItem("loggedInUsername",m),window.location.href="../../../../index.html"}else alert("Login failed after registration. Please log in manually")}}catch(d){console.error("Registration error:",d),alert("An error occurred. Please try again later.")}}async function y(){document.getElementById("login-btn").addEventListener("click",()=>{window.location.href="../../../../auth/login/index.html"})}const w=document.getElementById("register-form");w.addEventListener("submit",h);y();
