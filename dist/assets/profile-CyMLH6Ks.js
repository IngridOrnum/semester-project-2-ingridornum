import{c as f,d as m}from"./constants-BDf8nfUD.js";import{g,r as l}from"./main-DDwA7gw_.js";/* empty css              */async function p(a,t){const e=await g(),n={method:"PUT",headers:{"X-Noroff-API-Key":f,Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)},o=await fetch(`${m}/${a}`,n);if(!o.ok)throw console.error("Failed to update profile data:",o),new Error(`Error updating profile data: ${o.status}`);return await o.json()}async function c(){const a=localStorage.getItem("loggedInUsername"),t=await l(a),e=document.getElementById("user-profile-info");e&&(e.innerHTML=`
    <div class="flex items-center gap-4">
    <img class="w-full h-[200px] object-cover" src="${t.data.banner.url}" alt="Profile Banner">
        <img class="w-10 h-10 rounded-full object-cover" src="${t.data.avatar.url}" alt="Profile Avatar">
        <span class="font-subtitle text-ui-black text-xl">${t.data.name}</span>
    </div>
   
                `)}async function v(){const a=localStorage.getItem("loggedInUsername"),t=await l(a),e=document.getElementById("edit-profile-btn"),n=document.getElementById("update-profile-form"),o=document.getElementById("bio"),i=document.getElementById("avatar"),r=document.getElementById("banner-url");e.addEventListener("click",()=>{n.classList.add("block"),n.classList.remove("hidden"),e.classList.add("hidden"),e.classList.remove("block")}),o&&(o.value=t.data.bio||""),i&&(i.value=t.data.avatar?.url||""),r&&(r.value=t.data.banner?.url||""),n&&n.addEventListener("submit",async d=>{d.preventDefault();const u={bio:o.value,avatar:{url:i.value},banner:{url:r.value}};try{const s=await p(a,u);console.log("Profile updated successfully:",s),await c(),n.classList.add("hidden"),n.classList.remove("block"),e.classList.add("block"),e.classList.remove("hidden")}catch(s){console.error("Error updating profile:",s)}})}async function I(){document.getElementById("create-listing-btn").addEventListener("click",()=>{window.location.href="../../../../listings/create/index.html"})}async function b(){document.getElementById("edit-listing-btn").addEventListener("click",()=>{window.location.href="../../../../listings/edit/index.html"})}c();v();I();b();
