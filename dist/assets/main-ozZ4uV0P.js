(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function e(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=e(t);fetch(t.href,o)}})();const m="https://v2.api.noroff.dev/auction",g=`${m}/listings`;async function h(r){try{if(!r.trim())return console.error("Search query is empty or missing. No API call will be made."),{listings:[]};const n=`${g}/search?q=${encodeURIComponent(r)}`;console.log("Constructed Endpoint:",n);const e=await fetch(n);if(!e.ok)throw console.error("Response Status:",e.status,e.statusText),new Error(`Error fetching data: ${e.status}`);const s=await e.json();return console.log("API Response Data:",s),{listings:s.data||[]}}catch(n){throw console.error("Error in searchListings:",n.message),n}}async function y(r=12,n=1,e=""){const s=new URLSearchParams({limit:r,page:n});e&&s.append("search",e),console.log(`${g}?${s.toString()}`);const t=await fetch(`${g}?${s.toString()}`);if(!t.ok)throw console.log("Response:",t),new Error(`Error fetching data: ${t.status}`);const o=await t.json();return console.log(o),o}let i=1;const a=12;let c="",u=[],f=0;async function l(r=1,n=""){try{let e;if(n.trim()){e=await h(n),f=e.listings?.length||0;const s=(r-1)*a,t=s+a;u=e.listings?.slice(s,t)||[]}else e=await y(a,r),u=e.listings||e.data||[],f=e.totalListings||0;p(u),L()}catch(e){console.error("Error displaying listings:",e),p([])}}function p(r){const n=document.querySelector(".listings-container");if(n.innerHTML="",r.length===0){n.innerHTML="<p>No listings found.</p>";return}r.forEach(e=>{const s=document.createElement("li");s.classList.add("li-single-listing"),s.setAttribute("data-id",e.id),s.innerHTML=`
            <div class="li-single-listing-content">
                <img src="${e.media?.[0]?.url||""}" alt="${e.media?.[0]?.alt||"No image"}">
                <span>${e.title}</span>
            </div>
        `,n.appendChild(s)})}function L(){const r=document.getElementById("prevPage"),n=document.getElementById("nextPage"),e=Math.ceil(f/a);r.disabled=i<=1,n.disabled=i>=e}document.getElementById("prevPage").addEventListener("click",()=>{i>1&&(i--,l(i,c))});document.getElementById("nextPage").addEventListener("click",()=>{i++,l(i,c)});document.getElementById("searchInput").addEventListener("input",async r=>{c=r.target.value,i=1,await l(i,c)});l(i);
